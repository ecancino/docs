---
title: 'Upgrade to Prisma 5'
metaTitle: 'Upgrade to Prisma 5'
metaDescription: 'Guides on how to upgrade to Prisma 5'
tocDepth: 3
toc: true
---

<TopBlock>

Prisma 5.0.0 introduces a number of **breaking changes**. This guide explains how upgrading might affect your application and gives instructions on how to handle any breaking changes.

</TopBlock>

## Major changes

This section gives an overview of major breaking changes in Prisma 5.

We recommend that you first address any Prisma schema validation errors, then pull your database to reflect new Prisma schema capabilities, and finally fix any type errors in Prisma Client and validate by running your test suite.

### Node.js minimum version change

From Prism version 5.0.0, the minimum version of Node.js supported is 16.13.0. If your project uses an earlier version of Node.js, you will need to update it.

See our [system requirements](/reference/system-requirements) for all minimum version requirements.

<Admonition type="info">

Node.js v16.x is reaching [end-of-life on 11 September, 2023](https://nodejs.org/en/blog/announcements/nodejs16-eol) in order to coincide with the end-of-life of OpenSSL 1.1.1. For that reason we recommend upgrading to Node.js v18.16.1.

Please note that Prisma 5 will be the last major version of Prisma to support Node.js v16.

</Admonition>

### PostgreSQL minimum version change

From Prisma version 5.0.0, the minimum version of PostgreSQL supported is version 9.6. If your project uses an earlier version of PostgreSQL, you will need to update it.

Our tests have not been testing PostgreSQL 9.4 and 9.5 for some time, so we are formally removing support.

### Prisma Client embedded SQLite version updated

With Prisma version 5.0.0, we have upgraded the embedded version of SQLite from `3.35.4` to `3.41.2`. We did not see any breaking changes and don't anticipate any changes needed in user projects, but if you are using SQLite, make sure to check [the SQLite changelog](https://www.sqlite.org/changes.html)

### Removal of array shortcuts

Prisma version 5.0.0 drops support for array shortcuts, which were a way to omit a wrapping array for single values.

#### `OR` clauses

The following code in Prisma 4:

```js
prisma.user.findMany({
  OR: { email: 'foo@example.com' },
})
```

Will need to be changed to the following in Prisma 5:

```js highlight=2;normal
prisma.user.findMany({
  OR: [{ email: 'foo@example.com' }],
})
```

`OR` clauses will only accept array values.

#### `in` and `notIn` clauses

Similar to `OR`, `in` and `notIn` require array values.

Prisma 4:

```js
prisma.user.findMany({
  id: { in: 123 },
})

prisma.user.findMany({
  id: { notIn: 123 },
})
```

Prisma 5:

```js highlight=2,6;normal
prisma.user.findMany({
  id: { in: [123] },
})

prisma.user.findMany({
  id: { notIn: [123] },
})
```

If your `in` and `notIn` values are only one element, you can also update your code to not use these clauses:

```js highlight=2,6;normal
prisma.user.findMany({
  id: 123,
})

prisma.user.findMany({
  id: { not: 123 },
})
```

#### `path` argument for filtering on JSON fields in Postgres

[When filtering on JSON fields in a Postgres table](https://www.prisma.io/docs/concepts/components/prisma-client/working-with-fields/working-with-json-fields#filter-on-a-json-field) the `path` argument now only accepts an array.

Prisma 4:

```prisma
datasource db {
  provider = "postgresql"
}

model User {
  id       String @id
  settings Json
}
```

```js
prisma.user.findMany({
  where: {
    settings: {
      path: 'someSetting',
      equals: someValue,
    },
  },
})
```

Prisma 5

```prisma
datasource db {
  provider = "postgresql"
}

model User {
  id       String @id
  settings Json
}
```

```js highlight=4;normal
prisma.user.findMany({
  where: {
    settings: {
      path: ['someSetting'],
      equals: someValue,
    },
  },
})
```

<Admonition type="info">

Note: This change only affects PostgreSQL databases. MySQL databases are not affected.

</Admonition>

#### Composite and Scalar lists

Inputs for operations on Composite and Scalar lists now only accept array values. The following examples all use the following schema:

```prisma
model Post {
  id String @id @default(uuid())
  commentsList Comment[]
  tags String[]
}

type Comment {
  text String
}
```

##### Composite list filtering

[When filtering records based on a composite list field](https://www.prisma.io/docs/concepts/components/prisma-client/composite-types#finding-records-that-contain-composite-types-with-find-and-findmany) you will only be able to supply array values.

Prisma 4:

```js
prisma.post.findMany({
  commentsList: { equals: { text: 'hello' } },
})
```

Prisma 5:

```js highlight=2;normal
prisma.post.findMany({
  commentsList: { equals: [{ text: 'hello' }] },
})
```

##### Composite list input

If you exclude `equals`, you still must supply an array value for composite list fields.

Prisma 4:

```js
prisma.post.findMany({
  commentsList: { text: 'hello' },
})
```

Prisma 5:

```js highlight=2;normal
prisma.post.findMany({
  commentsList: [{ text: 'hello' }],
})
```

##### Scalar lists

Scalar list values must be arrays in all operations.

Prisma 4:

```js
prisma.post.create({
  data: { tags: 'databases' },
})

prisma.post.findMany({
  where: { tags: 'databases' },
})
```

Prisma 5:

```js highlight=2,6;normal
prisma.post.create({
  data: { tags: ['databases'] },
})

prisma.post.findMany({
  where: { tags: ['databases'] },
})
```

### Removal of `jsonProtocol` preview feature

The `jsonProtocol` preview feature is now generally available, [speeding up Prisma significantly by default](https://www.prisma.io/blog/prisma-and-serverless-73hbgKnZ6t#improved-startup-performance-by-9x)! When upgrading to Prisma 5, make sure to remove `jsonProtocol` from your preview features, if added.

Prisma 4:

```prisma
generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch", "jsonProtocol"]
}
```

Prisma 5:

```prisma highlight=3;delete
generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch"]
}
```

### Removal of deprecated `rejectOnNotFound` parameter

### Removal of `runtime/index.js` from generated client

### `cockroachdb` provider is now required when connecting to a CockroachDB database

## Minor changes

The following changes may cause applications to no longer work as intended, but are easy to solve, not widely used, or both.

### Removal of deprecated Prisma CLI flags

### Removal of deprecated `prisma2` executable

### Rename `migration-engine` to `schema-engine`

## Upgrade the <inlinecode>prisma</inlinecode> and <inlinecode>@prisma/client</inlinecode> packages to Prisma 5

To upgrade to Prisma 5 from an earlier version, you need to update both the `prisma` and `@prisma/client` packages. Both the `prisma` and `@prisma/client` packages install with a caret `^` in their version number. This allows upgrades to new minor versions, but not major versions, to safeguard against breaking changes.

To ignore the caret `^` and upgrade across major versions, you can use the `@5` tag when you upgrade with `npm`, or `yarn`:

<Admonition type="alert">

Before you upgrade, check each **breaking change** above to see how the upgrade might affect your application.

</Admonition>

<TabbedContent tabs={[<FileWithIcon text="npm" icon="file"/>, <FileWithIcon text="yarn" icon="file"/>]}>

<tab>

```terminal
npm install prisma@5 @prisma/client@5
```

</tab>

<tab>

```terminal
yarn upgrade prisma@5 @prisma/client@5
```

</tab>

</TabbedContent>

Enjoy Prisma 5!
